<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mustafa Qadri - Interactive Resume</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <style>
        body {
            background-color: #F4F7FC; /* Light Blue/Grey Background */
            color: #1A202C; /* Dark Text */
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 400px;
            max-height: 450px;
        }
        .nav-btn {
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
            font-weight: 500;
            transition: all 0.2s;
            border: 2px solid transparent;
        }
        .nav-btn.active, .nav-btn:hover {
            background-color: #E0E8F5; /* Lighter Blue/Grey Hover */
            color: #004AAD; /* Primary Dark Blue Text */
            border-color: #0077B6; /* Medium Blue Border */
        }
        .timeline-item::before {
            content: '';
            position: absolute;
            width: 1rem;
            height: 1rem;
            border-radius: 9999px;
            left: -0.5rem;
            top: 0.5rem;
            background-color: #004AAD; /* Primary Dark Blue Circle */
            border: 2px solid #F4F7FC; /* Match new background */
        }
        .gemini-btn {
            background-color: #004AAD;
            color: white;
            padding: 0.25rem 0.75rem;
            font-size: 0.875rem;
            font-weight: 500;
            border-radius: 9999px;
            margin-top: 1rem;
            display: inline-block;
            transition: background-color 0.2s;
        }
        .gemini-btn:hover {
            background-color: #002D6E;
        }
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            z-index: 100;
        }
        .modal-content {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            padding: 1.5rem;
            border-radius: 0.5rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            z-index: 110;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            color: #1A202C;
        }
        .modal-close-btn {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            font-weight: bold;
            color: #004AAD;
            cursor: pointer;
        }
        .loader {
            border: 4px solid #F4F7FC;
            border-top: 4px solid #004AAD;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 2rem auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'light-bg': '#F4F7FC', /* Light Blue/Grey Background */
                        'light-card': '#ffffff', /* White Card */
                        'light-border': '#DDE6F0', /* Light Blue Border */
                        'text-dark': '#1A202C', /* Dark Text */
                        'text-med': '#4A5568', /* Medium Text */
                        'primary': '#004AAD', /* Deep Blue - Accent/Titles/Dark Chart */
                        'secondary': '#0077B6', /* Medium Blue - Secondary Chart/Hover Border */
                    }
                }
            }
        }
    </script>
</head>
<body class="antialiased">


    <!-- 
    Chosen Palette: Elegant Corporate Blue (#F4F7FC, #DDE6F0, #004AAD, #0077B6, #1A202C, #4A5568)
    Application Structure Plan: A single-page application with a sticky top navigation bar. The nav buttons ("Overview", "Key Programs", "Career Metrics", "Experience", "Skills") control the visibility of corresponding <section> elements. This provides a clean, user-driven, thematic exploration path, which is superior to a linear resume. "Career Metrics" is a dashboard for quantitative data, while "Experience" is an interactive timeline. This structure allows a recruiter to quickly find the information they need (e.g., jump directly to metrics or skills).
    Visualization & Content Choices:
    - Resume Summary -> Inform -> KPI Cards (HTML/Tailwind) -> Interaction: None. Justification: Quick, high-level stats.
    - Key TELUS Programs -> Inform -> 3-Column Card Layout (HTML/Tailwind) -> Interaction: Gemini API Insight Button. Justification: Clearly presents qualitative project highlights with interactive deep-dive.
    - Career Financial Data ($15M, $2M, $50M, $20M) -> Compare -> Bar Chart (Chart.js/Canvas) -> Interaction: Tooltips. Justification: Directly compares the scale of financial impact across roles.
    - Career Operational Data (35%, 50%, 30%, 75%, 25%, 75%) -> Compare -> Horizontal Bar Chart (Chart.js/Canvas) -> Interaction: Tooltips. Justification: Horizontal bar is best for long labels and comparing multiple percentage-based metrics.
    - Employment History -> Organize/Change -> Interactive Vertical Timeline (HTML/Tailwind + JS) -> Interaction: Click on job title to toggle visibility of details, Gemini API Insight Button. Justification: Cleaner, more engaging, and less overwhelming than a long static list, plus interview prep layer.
    - Skills/Certs/Edu -> Organize -> 3-Column Card Layout (HTML/Tailwind) -> Interaction: None. Justification: Easy-to-scan categorization.
    CONFIRMATION: NO SVG graphics used. NO Mermaid JS used.
    -->


    <div id="modalOverlay" class="modal-overlay hidden"></div>
    <div id="modalContent" class="modal-content hidden">
        <button id="closeModal" class="modal-close-btn">&times;</button>
        <h3 id="modalTitle" class="text-2xl font-bold text-primary mb-4">✨ AI-Powered Insights</h3>
        <div id="modalSpinner" class="loader hidden"></div>
        <div id="modalResults" class="space-y-4 text-text-med"></div>
    </div>


    <header class="sticky top-0 z-50 w-full bg-light-card shadow-md">
        <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-center items-center h-16 space-x-2 md:space-x-4">
                <button id="nav-overview" class="nav-btn active">Overview</button>
                <button id="nav-programs" class="nav-btn">Key Programs</button>
                <button id="nav-metrics" class="nav-btn">Career Metrics</button>
                <button id="nav-experience" class="nav-btn">Experience</button>
                <button id="nav-skills" class="nav-btn">Skills</button>
            </div>
        </nav>
    </header>


    <main class="max-w-7xl mx-auto p-4 sm:p-6 lg:p-8">


        <section id="overview-section" class="space-y-8">
            <div class="text-center p-8 bg-light-card rounded-lg shadow-lg">
                <h1 class="text-4xl font-bold text-text-dark">Mustafa Qadri</h1>
                <p class="text-2xl text-primary font-light mt-2">Strategic Wireless Planning & Engineering Leader</p>
            </div>


            <div class="bg-light-card rounded-lg shadow-lg p-8">
                <h2 class="text-2xl font-semibold text-text-dark mb-4">Professional Summary</h2>
                <p id="resume-summary" class="text-lg text-text-med leading-relaxed">
                    With over 20 years of experience at Tier 1 operators and vendors, I specialize in end-to-end network evolution. I have a proven ability to lead high-performing, cross-functional teams, translating strategic vision into actionable plans. My expertise lies in aligning RAN, Core, and Transport domains to deliver complex 4G/5G technology rollouts.
                </p>
            </div>


            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="bg-light-card rounded-lg shadow-lg p-6 text-center">
                    <div class="text-5xl font-bold text-primary">20+</div>
                    <div class="text-lg font-semibold text-text-med mt-2">Years of Experience</div>
                </div>
                <div class="bg-light-card rounded-lg shadow-lg p-6 text-center">
                    <div class="text-5xl font-bold text-primary">5G/AI</div>
                    <div class="text-lg font-semibold text-text-med mt-2">Core Technologies</div>
                </div>
                <div class="bg-light-card rounded-lg shadow-lg p-6 text-center">
                    <div class="text-5xl font-bold text-primary">3+</div>
                    <div class="text-lg font-semibold text-text-med mt-2">Key Certifications</div>
                </div>
            </div>
        </section>


        <section id="programs-section" class="hidden space-y-8">
            <div class="bg-light-card rounded-lg shadow-lg p-8">
                <h2 class="text-2xl font-semibold text-text-dark mb-4">Key TELUS Programs</h2>
                <p class="text-lg text-text-med leading-relaxed mb-6">
                    At TELUS, I have led several high-impact, strategic programs that bridge technology, business, and regulatory requirements. These initiatives demonstrate my ability to manage complex, end-to-end projects from architecture to execution.
                </p>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="border border-light-border rounded-lg p-6 bg-light-bg flex flex-col justify-between project-card">
                        <div>
                            <h3 class="text-xl font-bold text-primary">National 5G VoNR Enablement</h3>
                            <p class="text-text-med mt-2">Directed the end-to-end strategic planning and technical integration for the successful nationwide launch of Voice over New Radio (VoNR), coordinating across RAN, Core, and BSS domains.</p>
                        </div>
                        <button class="gemini-btn" onclick="handleInsightClick(event)">✨ Get AI Insights</button>
                    </div>
                    <div class="border border-light-border rounded-lg p-6 bg-light-bg flex flex-col justify-between project-card">
                        <div>
                            <h3 class="text-xl font-bold text-primary">Inter-MNO Seamless Handover</h3>
                            <p class="text-text-med mt-2">Spearheaded the program to act on government mandates to enable seamless network handover with Videotron and Freedom Mobile, ensuring carrier-grade service continuity for millions of subscribers.</p>
                        </div>
                        <button class="gemini-btn" onclick="handleInsightClick(event)">✨ Get AI Insights</button>
                    </div>
                    <div class="border border-light-border rounded-lg p-6 bg-light-bg flex flex-col justify-between project-card">
                        <div>
                            <h3 class="text-xl font-bold text-primary">AI-Powered SMART City Platform</h3>
                            <p class="text-text-med mt-2">Architected a GCP-based platform to aggregate, integrate and orchestrate various datasets and solutions to enable use cases in new verticals like “Economic Development” & “Safety and Security”.</p>
                        </div>
                        <button class="gemini-btn" onclick="handleInsightClick(event)">✨ Get AI Insights</button>
                    </div>
                </div>
            </div>
        </section>


        <section id="metrics-section" class="hidden space-y-8">
            <div class="bg-light-card rounded-lg shadow-lg p-8">
                <h2 class="text-2xl font-semibold text-text-dark mb-4">Career Metrics Dashboard</h2>
                <p class="text-lg text-text-med leading-relaxed mb-6">
                    This dashboard visualizes the quantifiable impact I have delivered throughout my career, focusing on financial outcomes and operational efficiencies. Interact with the charts to explore the data.
                </p>
            </div>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div class="bg-light-card rounded-lg shadow-lg p-6">
                    <h3 class="text-xl font-semibold text-text-dark text-center mb-4">Financial Impact ($M)</h3>
                    <div class="chart-container">
                        <canvas id="financialChart"></canvas>
                    </div>
                    <p class="text-sm text-text-med mt-4 text-center">Chart displays revenue generation, new business secured, and maximum project budgets managed across various roles.</p>
                </div>
                <div class="bg-light-card rounded-lg shadow-lg p-6">
                    <h3 class="text-xl font-semibold text-text-dark text-center mb-4">Operational Excellence (% Improvement)</h3>
                    <div class="chart-container">
                        <canvas id="operationalChart"></canvas>
                    </div>
                    <p class="text-sm text-text-med mt-4 text-center">Chart displays key performance improvements, efficiency gains, and issue reductions achieved through process optimization and data analysis.</p>
                </div>
            </div>


            <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
                <div class="bg-light-card rounded-lg shadow-lg p-6 text-center">
                    <div class="text-4xl font-bold text-primary">7,000+</div>
                    <div class="text-lg font-semibold text-text-med mt-2">Sites in Nationwide Initiatives</div>
                </div>
                <div class="bg-light-card rounded-lg shadow-lg p-6 text-center">
                    <div class="text-4xl font-bold text-primary">190M+</div>
                    <div class="text-lg font-semibold text-text-med mt-2">Subscribers Served</div>
                </div>
                <div class="bg-light-card rounded-lg shadow-lg p-6 text-center">
                    <div class="text-4xl font-bold text-primary">10+</div>
                    <div class="text-lg font-semibold text-text-med mt-2">SMEs & PMs Led Per Team</div>
                </div>
                <div class="bg-light-card rounded-lg shadow-lg p-6 text-center">
                    <div class="text-4xl font-bold text-primary">50%</div>
                    <div class="text-lg font-semibold text-text-med mt-2">Faster Executive Buy-in</div>
                </div>
            </div>
        </section>
        
        <section id="experience-section" class="hidden space-y-8">
            <div class="bg-light-card rounded-lg shadow-lg p-8">
                <h2 class="text-2xl font-semibold text-text-dark mb-4">Interactive Career Timeline</h2>
                <p class="text-lg text-text-med leading-relaxed mb-8">
                    My career has been a progression of expanding technical expertise and leadership responsibility. Click on any job title to expand or collapse its key responsibilities and achievements.
                </p>
                
                <div class="relative pl-4 border-l-4 border-light-border">


                    <div class="mb-8 timeline-item project-card">
                        <time class="text-sm font-semibold text-primary">Oct 2020 – Present</time>
                        <button class="job-toggle text-xl font-bold text-text-dark flex items-center space-x-2">
                            <span class="job-title">Senior Design Specialist | Telus Mobility</span>
                            <span class="job-arrow text-primary">▼</span>
                        </button>
                        <div class="job-details mt-2 p-4 bg-light-bg rounded-lg space-y-2 text-text-med">
                            <p>• **Translate strategic vision into action** by leading E2E network evolution (7,000+ sites), aligning RAN, Core, and BSS domains for EBITDA growth.</p>
                            <p>• **Drive CAPEX efficiency** by performing in-depth financial analysis (DCF, TCO, IRR in EASE) to secure funding and align investment priorities.</p>
                            <p>• **Lead high-performing cross-functional teams** (10+ SMEs, PMs) to develop technology strategy for new verticals like SMART cities and Edge compute.</p>
                            <p>• **Led development of emerging tech solutions** using cloud technologies and data tools like Looker and BigQuery.</p>
                            <p>• **Manage complex stakeholder collaboration** with 3+ partners (ISVs, hyperscalers) to deliver holistic E2E solutions.</p>
                            <p>• **Develop long-term technology roadmaps** to future-proof the network.</p>
                            <p>• **Simplify complex technical information** to achieve up to 50% faster executive buy-in.</p>
                            <button class="gemini-btn" onclick="handleInsightClick(event)">✨ Get AI Insights</button>
                        </div>
                    </div>


                    <div class="mb-8 timeline-item project-card">
                        <time class="text-sm font-semibold text-primary">May 2019 – Oct 2020</time>
                        <button class="job-toggle text-xl font-bold text-text-dark flex items-center space-x-2">
                            <span class="job-title">Technical Solutions Manager | BLINQ Networks</span>
                            <span class="job-arrow text-primary">▶</span>
                        </button>
                        <div class="job-details hidden mt-2 p-4 bg-light-bg rounded-lg space-y-2 text-text-med">
                            <p>• Oversaw delivery of customized FWA solutions to 30+ clients, generating **$15M in revenue**.</p>
                            <p>• Achieved **25% increase in project completion** and **75% decrease in follow-up meetings** through team mentorship.</p>
                            <p>• Analyzed performance data to support new features, contributing to **$2M in new business**.</p>
                            <button class="gemini-btn" onclick="handleInsightClick(event)">✨ Get AI Insights</button>
                        </div>
                    </div>


                    <div class="mb-8 timeline-item project-card">
                        <time class="text-sm font-semibold text-primary">Oct 2016 – Mar 2019</time>
                        <button class="job-toggle text-xl font-bold text-text-dark flex items-center space-x-2">
                            <span class="job-title">Technical Manager | Huawei Technologies</span>
                            <span class="job-arrow text-primary">▶</span>
                        </button>
                        <div class="job-details hidden mt-2 p-4 bg-light-bg rounded-lg space-y-2 text-text-med">
                            <p>• Ensured "five-nines" (99.999% uptime) for coast-to-coast 3G/4G networks by leading a cross-functional quality assurance and support team.</p>
                            <p>• Secured approx. **$50M in new projects** by managing interoperability testing and PoC activities.</p>
                            <p>• Drove **75% reduction in software bugs** by acting as the voice of customer in the SDLC.</p>
                            <p>• Managed projects with budgets from **$5M to $20M** using Agile methodologies.</p>
                            <button class="gemini-btn" onclick="handleInsightClick(event)">✨ Get AI Insights</button>
                        </div>
                    </div>


                    <div class="mb-8 timeline-item project-card">
                        <time class="text-sm font-semibold text-primary">Feb 2011 – Oct 2016</time>
                        <button class="job-toggle text-xl font-bold text-text-dark flex items-center space-x-2">
                            <span class="job-title">Senior Wireless Engineer | Huawei Technologies</span>
                            <span class="job-arrow text-primary">▶</span>
                        </button>
                        <div class="job-details hidden mt-2 p-4 bg-light-bg rounded-lg space-y-2 text-text-med">
                            <p>• Led 4G network planning, deployment, and optimization, achieving **35% KPI improvement** through data analysis across 2000+ sites.</p>
                            <button class="gemini-btn" onclick="handleInsightClick(event)">✨ Get AI Insights</button>
                        </div>
                    </div>


                    <div class="mb-8 timeline-item project-card">
                        <time class="text-sm font-semibold text-primary">Apr 2010 – Jun 2010</time>
                        <button class="job-toggle text-xl font-bold text-text-dark flex items-center space-x-2">
                            <span class="job-title">Senior Engineer | Ericsson</span>
                            <span class="job-arrow text-primary">▶</span>
                        </button>
                        <div class="job-details hidden mt-2 p-4 bg-light-bg rounded-lg space-y-2 text-text-med">
                            <p>• Accelerated transmission network planning efficiency by **50%** and achieved a **30% reduction in deployment issues** through improved site survey accuracy.</p>
                            <button class="gemini-btn" onclick="handleInsightClick(event)">✨ Get AI Insights</button>
                        </div>
                    </div>


                    <div class="timeline-item project-card">
                        <time class="text-sm font-semibold text-primary">Mar 2005 – May 2009</time>
                        <button class="job-toggle text-xl font-bold text-text-dark flex items-center space-x-2">
                            <span class="job-title">Field Engineer | Multiple Contracts</span>
                            <span class="job-arrow text-primary">▶</span>
                        </button>
                        <div class="job-details hidden mt-2 p-4 bg-light-bg rounded-lg space-y-2 text-text-med">
                            <p>• Led nationwide RAN and microwave transmission deployments, managing technical implementation serving **190M+ subscribers** for tier-1 providers.</p>
                            <button class="gemini-btn" onclick="handleInsightClick(event)">✨ Get AI Insights</button>
                        </div>
                    </div>


                </div>
            </div>
        </section>


        <section id="skills-section" class="hidden space-y-8">
            <div class="bg-light-card rounded-lg shadow-lg p-8">
                <h2 class="text-2xl font-semibold text-text-dark mb-4">Skills, Certifications & Education</h2>
                <p class="text-lg text-text-med leading-relaxed mb-6">
                    A foundation of formal education and continuous learning through professional certifications, supporting a deep and diverse technical and strategic skillset.
                </p>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="border border-light-border rounded-lg p-6 bg-light-bg">
                        <h3 class="text-xl font-bold text-primary mb-3">Key Proficiencies</h3>
                        <ul class="space-y-2 text-text-med">
                            <li><strong>Core Tech:</strong> 5G SA/NSA, VoNR, RAN, Core, Transport, OSS/BSS</li>
                            <li><strong>Strategic:</strong> Network Planning, CAPEX/OPEX (EASE), Stakeholder Mgt.</li>
                            <li><strong>Emerging Tech:</strong> AI/ML, GCP, Edge Compute, Smart Cities</li>
                        </ul>
                    </div>
                    <div class="border border-light-border rounded-lg p-6 bg-light-bg">
                        <h3 class="text-xl font-bold text-primary mb-3">Certifications</h3>
                        <ul class="space-y-2 text-text-med">
                            <li>• ITIL v4 Certification, PeopleCert</li>
                            <li>• TOGAF Certification, The Open Group</li>
                            <li>• Scrum Product Owner, Scrum Study</li>
                        </ul>
                    </div>
                    <div class="border border-light-border rounded-lg p-6 bg-light-bg">
                        <h3 class="text-xl font-bold text-primary mb-3">Education</h3>
                        <ul class="space-y-2 text-text-med">
                            <li>• Operations' Management Certificate<br><em class="text-sm">University of Pennsylvania</em></li>
                            <li>• Bachelor of Engineering<br><em class="text-sm">Sir Syed University of Engineering & Technology</em></li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>


    </main>


    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            const navButtons = {
                'nav-overview': 'overview-section',
                'nav-programs': 'programs-section',
                'nav-metrics': 'metrics-section',
                'nav-experience': 'experience-section',
                'nav-skills': 'skills-section',
            };


            const allSections = Object.values(navButtons);
            const allNavBtns = Object.keys(navButtons);


            allNavBtns.forEach(btnId => {
                const button = document.getElementById(btnId);
                button.addEventListener('click', () => {
                    const targetSectionId = navButtons[btnId];


                    allSections.forEach(secId => {
                        document.getElementById(secId).classList.add('hidden');
                    });
                    document.getElementById(targetSectionId).classList.remove('hidden');


                    allNavBtns.forEach(bId => {
                        document.getElementById(bId).classList.remove('active');
                    });
                    button.classList.add('active');
                });
            });


            const jobToggles = document.querySelectorAll('.job-toggle');
            jobToggles.forEach(toggle => {
                const details = toggle.nextElementSibling;
                const arrow = toggle.querySelector('.job-arrow');
                
                if (!details.classList.contains('hidden')) {
                    arrow.textContent = '▼';
                } else {
                    arrow.textContent = '▶';
                }


                toggle.addEventListener('click', () => {
                    details.classList.toggle('hidden');
                    if (details.classList.contains('hidden')) {
                        arrow.textContent = '▶';
                    } else {
                        arrow.textContent = '▼';
                    }
                });
            });


            const commonTooltipCallback = {
                title: function(tooltipItems) {
                    const item = tooltipItems[0];
                    let label = item.chart.data.labels[item.dataIndex];
                    if (Array.isArray(label)) {
                      return label.join(' ');
                    } else {
                      return label;
                    }
                }
            };


            const financialChartCtx = document.getElementById('financialChart').getContext('2d');
            new Chart(financialChartCtx, {
                type: 'bar',
                data: {
                    labels: ['BLINQ Revenue', 'BLINQ New Biz', 'Huawei New Biz', 'Huawei Max Project Budget'],
                    datasets: [{
                        label: 'Value in $ Millions',
                        data: [15, 2, 50, 20],
                        backgroundColor: '#004AAD', /* Primary Dark Blue */
                        borderColor: '#002D6E',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: commonTooltipCallback
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Value in $ Millions'
                            }
                        }
                    }
                }
            });


            const operationalChartCtx = document.getElementById('operationalChart').getContext('2d');
            new Chart(operationalChartCtx, {
                type: 'bar',
                data: {
                    labels: [
                        'KPI Improvement (Huawei)', 
                        'Planning Efficiency (Ericsson)', 
                        'Deployment Issue Reduction (Ericsson)', 
                        'Bug Reduction (Huawei)', 
                        'Project Completion (BLINQ)', 
                        'Meeting Decrease (BLINQ)'
                    ],
                    datasets: [{
                        label: 'Improvement / Reduction (%)',
                        data: [35, 50, 30, 75, 25, 75],
                        backgroundColor: '#0077B6', /* Secondary Medium Blue */
                        borderColor: '#005080',
                        borderWidth: 1
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: commonTooltipCallback
                        }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Percentage (%)'
                            }
                        }
                    }
                }
            });


            const modalOverlay = document.getElementById('modalOverlay');
            const modalContent = document.getElementById('modalContent');
            const closeModal = document.getElementById('closeModal');
            const modalSpinner = document.getElementById('modalSpinner');
            const modalResults = document.getElementById('modalResults');
            const modalTitle = document.getElementById('modalTitle');


            window.showModal = function() {
                modalOverlay.classList.remove('hidden');
                modalContent.classList.remove('hidden');
            }


            window.hideModal = function() {
                modalOverlay.classList.add('hidden');
                modalContent.classList.add('hidden');
            }


            closeModal.addEventListener('click', hideModal);
            modalOverlay.addEventListener('click', hideModal);


            function getResumeContext() {
                let context = "Candidate's Summary: " + document.getElementById('resume-summary').textContent.trim() + "\n\n";
                context += "Candidate's Key Skills: " + document.getElementById('skills-section').textContent.trim();
                return context;
            }


            function formatApiResponse(text) {
                return text
                    .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>') 
                    .replace(/\•/g, '<br>•') 
                    .replace(/\n/g, '<br>'); 
            }


            window.handleInsightClick = async function(event) {
                const card = event.target.closest('.project-card');
                let title, description;


                if (card.querySelector('.job-title')) {
                    title = card.querySelector('.job-title').textContent.trim();
                    description = card.querySelector('.job-details').textContent.trim();
                } else {
                    title = card.querySelector('h3').textContent.trim();
                    description = card.querySelector('p').textContent.trim();
                }
                
                modalTitle.textContent = `✨ AI Insights: ${title}`;
                modalResults.innerHTML = '';
                modalSpinner.classList.remove('hidden');
                showModal();


                const resumeContext = getResumeContext();
                const systemPrompt = "You are an expert career coach and senior tech recruiter. You are analyzing the resume of Mustafa Qadri, a senior wireless and engineering leader.";
                const userQuery = `I'm interested in this project/role: "${title} - ${description}". 
                    Based on Mustafa's full resume context below, please generate two insightful interview questions a hiring manager might ask about this specific item. 
                    Below each question, provide a concise, professional answer written in the first person, as if you were Mustafa. Highlight the key challenges, actions, and results (STAR method).
                    
                    Full Resume Context:
                    ${resumeContext}`;


                try {
                    const generatedContent = await callGeminiApi(userQuery, systemPrompt);
                    modalResults.innerHTML = formatApiResponse(generatedContent);
                } catch (error) {
                    modalResults.innerHTML = '<p class="text-red-500">Sorry, unable to fetch AI insights at this time. Please try again later.</p>';
                } finally {
                    modalSpinner.classList.add('hidden');
                }
            }


            async function callGeminiApi(userQuery, systemPrompt, retries = 3, delay = 1000) {
                const apiKey = ""; 
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;


                const payload = {
                    contents: [{ parts: [{ text: userQuery }] }],
                    systemInstruction: {
                        parts: [{ text: systemPrompt }]
                    },
                };


                for (let i = 0; i < retries; i++) {
                    try {
                        const response = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });


                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }


                        const result = await response.json();
                        
                        if (result.candidates && result.candidates[0].content && result.candidates[0].content.parts[0].text) {
                            return result.candidates[0].content.parts[0].text;
                        } else {
                            throw new Error("Invalid API response structure.");
                        }
                    } catch (error) {
                        if (i === retries - 1) {
                            throw error;
                        }
                        await new Promise(res => setTimeout(res, delay * Math.pow(2, i)));
                    }
                }
            }


        });
    </script>
</body>

</html>
